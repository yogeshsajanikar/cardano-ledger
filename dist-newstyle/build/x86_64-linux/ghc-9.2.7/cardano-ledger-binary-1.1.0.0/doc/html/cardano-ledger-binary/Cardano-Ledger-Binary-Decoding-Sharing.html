<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head id="head" data-base-url=".."><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Cardano.Ledger.Binary.Decoding.Sharing</title><link href="../linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="../quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="../haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">cardano-ledger-binary-1.1.0.0: Binary serialization library used throughout ledger</span><ul class="links" id="page-menu"><li><a href="src/Cardano.Ledger.Binary.Decoding.Sharing.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Cardano.Ledger.Binary.Decoding.Sharing</p></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">class</span> <a href="../base/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> (<a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Share" title="Cardano.Ledger.Binary.Decoding.Sharing">Share</a> a) &#8658; <a href="#t:DecShareCBOR">DecShareCBOR</a> a <span class="keyword">where</span><ul class="subs"><li><span class="keyword">type</span> <a href="#t:Share">Share</a> a &#8759; <a href="../base/Data-Kind.html#t:Type" title="Data.Kind">Type</a></li><li><a href="#v:getShare">getShare</a> &#8759; a &#8594; <a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Share" title="Cardano.Ledger.Binary.Decoding.Sharing">Share</a> a</li><li><a href="#v:decShareCBOR">decShareCBOR</a> &#8759; <a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Share" title="Cardano.Ledger.Binary.Decoding.Sharing">Share</a> a &#8594; <a href="Cardano-Ledger-Binary-Decoding-Decoder.html#t:Decoder" title="Cardano.Ledger.Binary.Decoding.Decoder">Decoder</a> s a</li><li><a href="#v:decSharePlusCBOR">decSharePlusCBOR</a> &#8759; StateT (<a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Share" title="Cardano.Ledger.Binary.Decoding.Sharing">Share</a> a) (<a href="Cardano-Ledger-Binary-Decoding-Decoder.html#t:Decoder" title="Cardano.Ledger.Binary.Decoding.Decoder">Decoder</a> s) a</li></ul></li><li class="src short"><span class="keyword">newtype</span> <a href="#t:Interns">Interns</a> a = <a href="#v:Interns">Interns</a> [<a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Intern" title="Cardano.Ledger.Binary.Decoding.Sharing">Intern</a> a]</li><li class="src short"><span class="keyword">data</span> <a href="#t:Intern">Intern</a> a = <a href="#v:Intern">Intern</a> {<ul class="subs"><li><a href="#v:internMaybe">internMaybe</a> &#8759; a &#8594; <a href="../base/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a</li><li><a href="#v:internWeight">internWeight</a> &#8759; !<a href="../base/Data-Int.html#t:Int" title="Data.Int">Int</a></li></ul>}</li><li class="src short"><a href="#v:decShareLensCBOR">decShareLensCBOR</a> &#8759; <a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:DecShareCBOR" title="Cardano.Ledger.Binary.Decoding.Sharing">DecShareCBOR</a> b &#8658; SimpleGetter bs (<a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Share" title="Cardano.Ledger.Binary.Decoding.Sharing">Share</a> b) &#8594; StateT bs (<a href="Cardano-Ledger-Binary-Decoding-Decoder.html#t:Decoder" title="Cardano.Ledger.Binary.Decoding.Decoder">Decoder</a> s) b</li><li class="src short"><a href="#v:decSharePlusLensCBOR">decSharePlusLensCBOR</a> &#8759; <a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:DecShareCBOR" title="Cardano.Ledger.Binary.Decoding.Sharing">DecShareCBOR</a> b &#8658; Lens' bs (<a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Share" title="Cardano.Ledger.Binary.Decoding.Sharing">Share</a> b) &#8594; StateT bs (<a href="Cardano-Ledger-Binary-Decoding-Decoder.html#t:Decoder" title="Cardano.Ledger.Binary.Decoding.Decoder">Decoder</a> s) b</li><li class="src short"><a href="#v:decNoShareCBOR">decNoShareCBOR</a> &#8759; <a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:DecShareCBOR" title="Cardano.Ledger.Binary.Decoding.Sharing">DecShareCBOR</a> a &#8658; <a href="Cardano-Ledger-Binary-Decoding-Decoder.html#t:Decoder" title="Cardano.Ledger.Binary.Decoding.Decoder">Decoder</a> s a</li><li class="src short"><a href="#v:interns">interns</a> &#8759; <a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Interns" title="Cardano.Ledger.Binary.Decoding.Sharing">Interns</a> k &#8594; k &#8594; k</li><li class="src short"><a href="#v:internsFromMap">internsFromMap</a> &#8759; <a href="../base/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> k &#8658; Map k a &#8594; <a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Interns" title="Cardano.Ledger.Binary.Decoding.Sharing">Interns</a> k</li><li class="src short"><a href="#v:internsFromVMap">internsFromVMap</a> &#8759; <a href="../base/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> k &#8658; <a href="../vector-map/Data-VMap.html#t:VMap" title="Data.VMap">VMap</a> <a href="../vector-map/Data-VMap.html#t:VB" title="Data.VMap">VB</a> kv k a &#8594; <a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Interns" title="Cardano.Ledger.Binary.Decoding.Sharing">Interns</a> k</li><li class="src short"><a href="#v:toMemptyLens">toMemptyLens</a> &#8759; <a href="../base/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> a &#8658; Lens' a b &#8594; Lens' c b &#8594; Lens' c a</li><li class="src short"><a href="#v:decShareMonadCBOR">decShareMonadCBOR</a> &#8759; (<a href="Cardano-Ledger-Binary-Decoding-DecCBOR.html#t:DecCBOR" title="Cardano.Ledger.Binary.Decoding.DecCBOR">DecCBOR</a> (f b), <a href="../base/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> f) &#8658; <a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Interns" title="Cardano.Ledger.Binary.Decoding.Sharing">Interns</a> b &#8594; <a href="Cardano-Ledger-Binary-Decoding-Decoder.html#t:Decoder" title="Cardano.Ledger.Binary.Decoding.Decoder">Decoder</a> s (f b)</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">class</span> <a href="../base/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> (<a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Share" title="Cardano.Ledger.Binary.Decoding.Sharing">Share</a> a) &#8658; <a id="t:DecShareCBOR" class="def">DecShareCBOR</a> a <span class="keyword">where</span> <a href="src/Cardano.Ledger.Binary.Decoding.Sharing.html#DecShareCBOR" class="link">Source</a> <a href="#t:DecShareCBOR" class="selflink">#</a></p><div class="subs minimal"><p class="caption">Minimal complete definition</p><p class="src">(<a href="Cardano-Ledger-Binary-Decoding-Sharing.html#v:decShareCBOR" title="Cardano.Ledger.Binary.Decoding.Sharing">decShareCBOR</a> | <a href="Cardano-Ledger-Binary-Decoding-Sharing.html#v:decSharePlusCBOR" title="Cardano.Ledger.Binary.Decoding.Sharing">decSharePlusCBOR</a>)</p></div><div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a id="t:Share" class="def">Share</a> a &#8759; <a href="../base/Data-Kind.html#t:Type" title="Data.Kind">Type</a> <a href="src/Cardano.Ledger.Binary.Decoding.Sharing.html#Share" class="link">Source</a> <a href="#t:Share" class="selflink">#</a></p> <div class="subs default"><p class="caption"></p><p class="src"><span class="keyword">type</span> <a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Share" title="Cardano.Ledger.Binary.Decoding.Sharing">Share</a> a = ()</p></div></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:getShare" class="def">getShare</a> &#8759; a &#8594; <a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Share" title="Cardano.Ledger.Binary.Decoding.Sharing">Share</a> a <a href="src/Cardano.Ledger.Binary.Decoding.Sharing.html#getShare" class="link">Source</a> <a href="#v:getShare" class="selflink">#</a></p><div class="doc"><p>Whenever <code>fromShareCBOR</code> is being used for defining the instance this
 function should return the state that can be added whenever user invokes
 <code><a href="Cardano-Ledger-Binary-Decoding-Sharing.html#v:decSharePlusCBOR" title="Cardano.Ledger.Binary.Decoding.Sharing">decSharePlusCBOR</a></code>. <code><a href="../base/Data-Monoid.html#v:mempty" title="Data.Monoid">mempty</a></code> is returned by default.</p></div><p class="src"><a id="v:decShareCBOR" class="def">decShareCBOR</a> &#8759; <a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Share" title="Cardano.Ledger.Binary.Decoding.Sharing">Share</a> a &#8594; <a href="Cardano-Ledger-Binary-Decoding-Decoder.html#t:Decoder" title="Cardano.Ledger.Binary.Decoding.Decoder">Decoder</a> s a <a href="src/Cardano.Ledger.Binary.Decoding.Sharing.html#decShareCBOR" class="link">Source</a> <a href="#v:decShareCBOR" class="selflink">#</a></p><div class="doc"><p>Utilize sharing when decoding, but do not add anything to the state for
 future sharing.</p></div><p class="src"><a id="v:decSharePlusCBOR" class="def">decSharePlusCBOR</a> &#8759; StateT (<a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Share" title="Cardano.Ledger.Binary.Decoding.Sharing">Share</a> a) (<a href="Cardano-Ledger-Binary-Decoding-Decoder.html#t:Decoder" title="Cardano.Ledger.Binary.Decoding.Decoder">Decoder</a> s) a <a href="src/Cardano.Ledger.Binary.Decoding.Sharing.html#decSharePlusCBOR" class="link">Source</a> <a href="#v:decSharePlusCBOR" class="selflink">#</a></p><div class="doc"><p>Deserialize with sharing and add to the state that is used for sharing. Default
 implementation will add value returned by <code><a href="Cardano-Ledger-Binary-Decoding-Sharing.html#v:getShare" title="Cardano.Ledger.Binary.Decoding.Sharing">getShare</a></code> for adding to the
 state.</p></div></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:DecShareCBOR">Instances</h4><details id="i:DecShareCBOR" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:DecShareCBOR:DecShareCBOR:1"></span> (<a href="../base/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> k, <a href="Cardano-Ledger-Binary-Decoding-DecCBOR.html#t:DecCBOR" title="Cardano.Ledger.Binary.Decoding.DecCBOR">DecCBOR</a> k, <a href="Cardano-Ledger-Binary-Decoding-DecCBOR.html#t:DecCBOR" title="Cardano.Ledger.Binary.Decoding.DecCBOR">DecCBOR</a> v) &#8658; <a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:DecShareCBOR" title="Cardano.Ledger.Binary.Decoding.Sharing">DecShareCBOR</a> (Map k v)</span> <a href="src/Cardano.Ledger.Binary.Decoding.Sharing.html#line-182" class="link">Source</a> <a href="#t:DecShareCBOR" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:DecShareCBOR:DecShareCBOR:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-Ledger-Binary-Decoding-Sharing.html">Cardano.Ledger.Binary.Decoding.Sharing</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Share" title="Cardano.Ledger.Binary.Decoding.Sharing">Share</a> (Map k v) <a href="src/Cardano.Ledger.Binary.Decoding.Sharing.html#Share" class="link">Source</a> <a href="#t:Share" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:getShare">getShare</a> &#8759; Map k v &#8594; <a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Share" title="Cardano.Ledger.Binary.Decoding.Sharing">Share</a> (Map k v) <a href="src/Cardano.Ledger.Binary.Decoding.Sharing.html#getShare" class="link">Source</a> <a href="#v:getShare" class="selflink">#</a></p><p class="src"><a href="#v:decShareCBOR">decShareCBOR</a> &#8759; <a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Share" title="Cardano.Ledger.Binary.Decoding.Sharing">Share</a> (Map k v) &#8594; <a href="Cardano-Ledger-Binary-Decoding-Decoder.html#t:Decoder" title="Cardano.Ledger.Binary.Decoding.Decoder">Decoder</a> s (Map k v) <a href="src/Cardano.Ledger.Binary.Decoding.Sharing.html#decShareCBOR" class="link">Source</a> <a href="#v:decShareCBOR" class="selflink">#</a></p><p class="src"><a href="#v:decSharePlusCBOR">decSharePlusCBOR</a> &#8759; StateT (<a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Share" title="Cardano.Ledger.Binary.Decoding.Sharing">Share</a> (Map k v)) (<a href="Cardano-Ledger-Binary-Decoding-Decoder.html#t:Decoder" title="Cardano.Ledger.Binary.Decoding.Decoder">Decoder</a> s) (Map k v) <a href="src/Cardano.Ledger.Binary.Decoding.Sharing.html#decSharePlusCBOR" class="link">Source</a> <a href="#v:decSharePlusCBOR" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:DecShareCBOR:DecShareCBOR:2"></span> (<a href="../base/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> k, <a href="Cardano-Ledger-Binary-Decoding-DecCBOR.html#t:DecCBOR" title="Cardano.Ledger.Binary.Decoding.DecCBOR">DecCBOR</a> k, <a href="Cardano-Ledger-Binary-Decoding-DecCBOR.html#t:DecCBOR" title="Cardano.Ledger.Binary.Decoding.DecCBOR">DecCBOR</a> v) &#8658; <a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:DecShareCBOR" title="Cardano.Ledger.Binary.Decoding.Sharing">DecShareCBOR</a> (<a href="../vector-map/Data-VMap.html#t:VMap" title="Data.VMap">VMap</a> <a href="../vector-map/Data-VMap.html#t:VB" title="Data.VMap">VB</a> <a href="../vector-map/Data-VMap.html#t:VB" title="Data.VMap">VB</a> k v)</span> <a href="src/Cardano.Ledger.Binary.Decoding.Sharing.html#line-188" class="link">Source</a> <a href="#t:DecShareCBOR" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:DecShareCBOR:DecShareCBOR:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-Ledger-Binary-Decoding-Sharing.html">Cardano.Ledger.Binary.Decoding.Sharing</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Share" title="Cardano.Ledger.Binary.Decoding.Sharing">Share</a> (<a href="../vector-map/Data-VMap.html#t:VMap" title="Data.VMap">VMap</a> <a href="../vector-map/Data-VMap.html#t:VB" title="Data.VMap">VB</a> <a href="../vector-map/Data-VMap.html#t:VB" title="Data.VMap">VB</a> k v) <a href="src/Cardano.Ledger.Binary.Decoding.Sharing.html#Share" class="link">Source</a> <a href="#t:Share" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:getShare">getShare</a> &#8759; <a href="../vector-map/Data-VMap.html#t:VMap" title="Data.VMap">VMap</a> <a href="../vector-map/Data-VMap.html#t:VB" title="Data.VMap">VB</a> <a href="../vector-map/Data-VMap.html#t:VB" title="Data.VMap">VB</a> k v &#8594; <a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Share" title="Cardano.Ledger.Binary.Decoding.Sharing">Share</a> (<a href="../vector-map/Data-VMap.html#t:VMap" title="Data.VMap">VMap</a> <a href="../vector-map/Data-VMap.html#t:VB" title="Data.VMap">VB</a> <a href="../vector-map/Data-VMap.html#t:VB" title="Data.VMap">VB</a> k v) <a href="src/Cardano.Ledger.Binary.Decoding.Sharing.html#getShare" class="link">Source</a> <a href="#v:getShare" class="selflink">#</a></p><p class="src"><a href="#v:decShareCBOR">decShareCBOR</a> &#8759; <a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Share" title="Cardano.Ledger.Binary.Decoding.Sharing">Share</a> (<a href="../vector-map/Data-VMap.html#t:VMap" title="Data.VMap">VMap</a> <a href="../vector-map/Data-VMap.html#t:VB" title="Data.VMap">VB</a> <a href="../vector-map/Data-VMap.html#t:VB" title="Data.VMap">VB</a> k v) &#8594; <a href="Cardano-Ledger-Binary-Decoding-Decoder.html#t:Decoder" title="Cardano.Ledger.Binary.Decoding.Decoder">Decoder</a> s (<a href="../vector-map/Data-VMap.html#t:VMap" title="Data.VMap">VMap</a> <a href="../vector-map/Data-VMap.html#t:VB" title="Data.VMap">VB</a> <a href="../vector-map/Data-VMap.html#t:VB" title="Data.VMap">VB</a> k v) <a href="src/Cardano.Ledger.Binary.Decoding.Sharing.html#decShareCBOR" class="link">Source</a> <a href="#v:decShareCBOR" class="selflink">#</a></p><p class="src"><a href="#v:decSharePlusCBOR">decSharePlusCBOR</a> &#8759; StateT (<a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Share" title="Cardano.Ledger.Binary.Decoding.Sharing">Share</a> (<a href="../vector-map/Data-VMap.html#t:VMap" title="Data.VMap">VMap</a> <a href="../vector-map/Data-VMap.html#t:VB" title="Data.VMap">VB</a> <a href="../vector-map/Data-VMap.html#t:VB" title="Data.VMap">VB</a> k v)) (<a href="Cardano-Ledger-Binary-Decoding-Decoder.html#t:Decoder" title="Cardano.Ledger.Binary.Decoding.Decoder">Decoder</a> s) (<a href="../vector-map/Data-VMap.html#t:VMap" title="Data.VMap">VMap</a> <a href="../vector-map/Data-VMap.html#t:VB" title="Data.VMap">VB</a> <a href="../vector-map/Data-VMap.html#t:VB" title="Data.VMap">VB</a> k v) <a href="src/Cardano.Ledger.Binary.Decoding.Sharing.html#decSharePlusCBOR" class="link">Source</a> <a href="#v:decSharePlusCBOR" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:DecShareCBOR:DecShareCBOR:3"></span> (<a href="../base/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> k, <a href="Cardano-Ledger-Binary-Decoding-DecCBOR.html#t:DecCBOR" title="Cardano.Ledger.Binary.Decoding.DecCBOR">DecCBOR</a> k, <a href="Cardano-Ledger-Binary-Decoding-DecCBOR.html#t:DecCBOR" title="Cardano.Ledger.Binary.Decoding.DecCBOR">DecCBOR</a> v, Prim v) &#8658; <a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:DecShareCBOR" title="Cardano.Ledger.Binary.Decoding.Sharing">DecShareCBOR</a> (<a href="../vector-map/Data-VMap.html#t:VMap" title="Data.VMap">VMap</a> <a href="../vector-map/Data-VMap.html#t:VB" title="Data.VMap">VB</a> <a href="../vector-map/Data-VMap.html#t:VP" title="Data.VMap">VP</a> k v)</span> <a href="src/Cardano.Ledger.Binary.Decoding.Sharing.html#line-194" class="link">Source</a> <a href="#t:DecShareCBOR" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:DecShareCBOR:DecShareCBOR:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-Ledger-Binary-Decoding-Sharing.html">Cardano.Ledger.Binary.Decoding.Sharing</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Share" title="Cardano.Ledger.Binary.Decoding.Sharing">Share</a> (<a href="../vector-map/Data-VMap.html#t:VMap" title="Data.VMap">VMap</a> <a href="../vector-map/Data-VMap.html#t:VB" title="Data.VMap">VB</a> <a href="../vector-map/Data-VMap.html#t:VP" title="Data.VMap">VP</a> k v) <a href="src/Cardano.Ledger.Binary.Decoding.Sharing.html#Share" class="link">Source</a> <a href="#t:Share" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:getShare">getShare</a> &#8759; <a href="../vector-map/Data-VMap.html#t:VMap" title="Data.VMap">VMap</a> <a href="../vector-map/Data-VMap.html#t:VB" title="Data.VMap">VB</a> <a href="../vector-map/Data-VMap.html#t:VP" title="Data.VMap">VP</a> k v &#8594; <a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Share" title="Cardano.Ledger.Binary.Decoding.Sharing">Share</a> (<a href="../vector-map/Data-VMap.html#t:VMap" title="Data.VMap">VMap</a> <a href="../vector-map/Data-VMap.html#t:VB" title="Data.VMap">VB</a> <a href="../vector-map/Data-VMap.html#t:VP" title="Data.VMap">VP</a> k v) <a href="src/Cardano.Ledger.Binary.Decoding.Sharing.html#getShare" class="link">Source</a> <a href="#v:getShare" class="selflink">#</a></p><p class="src"><a href="#v:decShareCBOR">decShareCBOR</a> &#8759; <a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Share" title="Cardano.Ledger.Binary.Decoding.Sharing">Share</a> (<a href="../vector-map/Data-VMap.html#t:VMap" title="Data.VMap">VMap</a> <a href="../vector-map/Data-VMap.html#t:VB" title="Data.VMap">VB</a> <a href="../vector-map/Data-VMap.html#t:VP" title="Data.VMap">VP</a> k v) &#8594; <a href="Cardano-Ledger-Binary-Decoding-Decoder.html#t:Decoder" title="Cardano.Ledger.Binary.Decoding.Decoder">Decoder</a> s (<a href="../vector-map/Data-VMap.html#t:VMap" title="Data.VMap">VMap</a> <a href="../vector-map/Data-VMap.html#t:VB" title="Data.VMap">VB</a> <a href="../vector-map/Data-VMap.html#t:VP" title="Data.VMap">VP</a> k v) <a href="src/Cardano.Ledger.Binary.Decoding.Sharing.html#decShareCBOR" class="link">Source</a> <a href="#v:decShareCBOR" class="selflink">#</a></p><p class="src"><a href="#v:decSharePlusCBOR">decSharePlusCBOR</a> &#8759; StateT (<a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Share" title="Cardano.Ledger.Binary.Decoding.Sharing">Share</a> (<a href="../vector-map/Data-VMap.html#t:VMap" title="Data.VMap">VMap</a> <a href="../vector-map/Data-VMap.html#t:VB" title="Data.VMap">VB</a> <a href="../vector-map/Data-VMap.html#t:VP" title="Data.VMap">VP</a> k v)) (<a href="Cardano-Ledger-Binary-Decoding-Decoder.html#t:Decoder" title="Cardano.Ledger.Binary.Decoding.Decoder">Decoder</a> s) (<a href="../vector-map/Data-VMap.html#t:VMap" title="Data.VMap">VMap</a> <a href="../vector-map/Data-VMap.html#t:VB" title="Data.VMap">VB</a> <a href="../vector-map/Data-VMap.html#t:VP" title="Data.VMap">VP</a> k v) <a href="src/Cardano.Ledger.Binary.Decoding.Sharing.html#decSharePlusCBOR" class="link">Source</a> <a href="#v:decSharePlusCBOR" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:Interns" class="def">Interns</a> a <a href="src/Cardano.Ledger.Binary.Decoding.Sharing.html#Interns" class="link">Source</a> <a href="#t:Interns" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Interns" class="def">Interns</a> [<a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Intern" title="Cardano.Ledger.Binary.Decoding.Sharing">Intern</a> a]</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Interns">Instances</h4><details id="i:Interns" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Interns:Monoid:1"></span> <a href="../base/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> (<a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Interns" title="Cardano.Ledger.Binary.Decoding.Sharing">Interns</a> a)</span> <a href="src/Cardano.Ledger.Binary.Decoding.Sharing.html#line-62" class="link">Source</a> <a href="#t:Interns" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Interns:Monoid:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-Ledger-Binary-Decoding-Sharing.html">Cardano.Ledger.Binary.Decoding.Sharing</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mempty">mempty</a> &#8759; <a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Interns" title="Cardano.Ledger.Binary.Decoding.Sharing">Interns</a> a <a href="file:///nix/store/7wd7lm23cjb3mrp5rh6ag573znf82xlz-ghc-9.2.7-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src" class="link">Source</a> <a href="#v:mempty" class="selflink">#</a></p><p class="src"><a href="#v:mappend">mappend</a> &#8759; <a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Interns" title="Cardano.Ledger.Binary.Decoding.Sharing">Interns</a> a &#8594; <a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Interns" title="Cardano.Ledger.Binary.Decoding.Sharing">Interns</a> a &#8594; <a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Interns" title="Cardano.Ledger.Binary.Decoding.Sharing">Interns</a> a <a href="file:///nix/store/7wd7lm23cjb3mrp5rh6ag573znf82xlz-ghc-9.2.7-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src" class="link">Source</a> <a href="#v:mappend" class="selflink">#</a></p><p class="src"><a href="#v:mconcat">mconcat</a> &#8759; [<a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Interns" title="Cardano.Ledger.Binary.Decoding.Sharing">Interns</a> a] &#8594; <a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Interns" title="Cardano.Ledger.Binary.Decoding.Sharing">Interns</a> a <a href="file:///nix/store/7wd7lm23cjb3mrp5rh6ag573znf82xlz-ghc-9.2.7-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src" class="link">Source</a> <a href="#v:mconcat" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Interns:Semigroup:2"></span> <a href="../base/Prelude.html#t:Semigroup" title="Prelude">Semigroup</a> (<a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Interns" title="Cardano.Ledger.Binary.Decoding.Sharing">Interns</a> a)</span> <a href="src/Cardano.Ledger.Binary.Decoding.Sharing.html#line-100" class="link">Source</a> <a href="#t:Interns" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Interns:Semigroup:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-Ledger-Binary-Decoding-Sharing.html">Cardano.Ledger.Binary.Decoding.Sharing</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-60--62-">(&lt;&gt;)</a> &#8759; <a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Interns" title="Cardano.Ledger.Binary.Decoding.Sharing">Interns</a> a &#8594; <a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Interns" title="Cardano.Ledger.Binary.Decoding.Sharing">Interns</a> a &#8594; <a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Interns" title="Cardano.Ledger.Binary.Decoding.Sharing">Interns</a> a <a href="file:///nix/store/7wd7lm23cjb3mrp5rh6ag573znf82xlz-ghc-9.2.7-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src" class="link">Source</a> <a href="#v:-60--62-" class="selflink">#</a></p><p class="src"><a href="#v:sconcat">sconcat</a> &#8759; <a href="../base/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> (<a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Interns" title="Cardano.Ledger.Binary.Decoding.Sharing">Interns</a> a) &#8594; <a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Interns" title="Cardano.Ledger.Binary.Decoding.Sharing">Interns</a> a <a href="file:///nix/store/7wd7lm23cjb3mrp5rh6ag573znf82xlz-ghc-9.2.7-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src" class="link">Source</a> <a href="#v:sconcat" class="selflink">#</a></p><p class="src"><a href="#v:stimes">stimes</a> &#8759; <a href="../base/Prelude.html#t:Integral" title="Prelude">Integral</a> b &#8658; b &#8594; <a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Interns" title="Cardano.Ledger.Binary.Decoding.Sharing">Interns</a> a &#8594; <a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Interns" title="Cardano.Ledger.Binary.Decoding.Sharing">Interns</a> a <a href="file:///nix/store/7wd7lm23cjb3mrp5rh6ag573znf82xlz-ghc-9.2.7-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src" class="link">Source</a> <a href="#v:stimes" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Intern" class="def">Intern</a> a <a href="src/Cardano.Ledger.Binary.Decoding.Sharing.html#Intern" class="link">Source</a> <a href="#t:Intern" class="selflink">#</a></p><div class="doc"><p>This is an abstract interface that does the interning. In other words it
 does the actual sharing by looking up the supplied value in some existing
 data structure and uses that value instead. Relying on this interface gives us
 the benefit of ignoring the type of underlying data structure and allows us
 to compose many <code><a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Intern" title="Cardano.Ledger.Binary.Decoding.Sharing">Intern</a></code>s with the monoidal interface provided by <code><a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Interns" title="Cardano.Ledger.Binary.Decoding.Sharing">Interns</a></code>
 wrapper. In order to create an <code><a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Intern" title="Cardano.Ledger.Binary.Decoding.Sharing">Intern</a></code> see the <code><a href="Cardano-Ledger-Binary-Decoding-Sharing.html#v:internsFromMap" title="Cardano.Ledger.Binary.Decoding.Sharing">internsFromMap</a></code> or
 <code><a href="Cardano-Ledger-Binary-Decoding-Sharing.html#v:internsFromVMap" title="Cardano.Ledger.Binary.Decoding.Sharing">internsFromVMap</a></code> functions.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Intern" class="def">Intern</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:internMaybe" class="def">internMaybe</a> &#8759; a &#8594; <a href="../base/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a</dfn><div class="doc"><p>Function that will do the interning. If value is not available then
 <code><a href="../base/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code> is returned.</p></div></li><li><dfn class="src"><a id="v:internWeight" class="def">internWeight</a> &#8759; !<a href="../base/Data-Int.html#t:Int" title="Data.Int">Int</a></dfn><div class="doc"><p>Used for sorting. Normally set to the size of the underlying data
 structure. Keeping interns sorted with respect to how many elements
 is in the underlying data structure in theory gives a better chance of
 successful intern hit sooner rather than later.</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:decShareLensCBOR" class="def">decShareLensCBOR</a> &#8759; <a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:DecShareCBOR" title="Cardano.Ledger.Binary.Decoding.Sharing">DecShareCBOR</a> b &#8658; SimpleGetter bs (<a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Share" title="Cardano.Ledger.Binary.Decoding.Sharing">Share</a> b) &#8594; StateT bs (<a href="Cardano-Ledger-Binary-Decoding-Decoder.html#t:Decoder" title="Cardano.Ledger.Binary.Decoding.Decoder">Decoder</a> s) b <a href="src/Cardano.Ledger.Binary.Decoding.Sharing.html#decShareLensCBOR" class="link">Source</a> <a href="#v:decShareLensCBOR" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:decSharePlusLensCBOR" class="def">decSharePlusLensCBOR</a> &#8759; <a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:DecShareCBOR" title="Cardano.Ledger.Binary.Decoding.Sharing">DecShareCBOR</a> b &#8658; Lens' bs (<a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Share" title="Cardano.Ledger.Binary.Decoding.Sharing">Share</a> b) &#8594; StateT bs (<a href="Cardano-Ledger-Binary-Decoding-Decoder.html#t:Decoder" title="Cardano.Ledger.Binary.Decoding.Decoder">Decoder</a> s) b <a href="src/Cardano.Ledger.Binary.Decoding.Sharing.html#decSharePlusLensCBOR" class="link">Source</a> <a href="#v:decSharePlusLensCBOR" class="selflink">#</a></p><div class="doc"><p>Just like <code><a href="Cardano-Ledger-Binary-Decoding-Sharing.html#v:decSharePlusCBOR" title="Cardano.Ledger.Binary.Decoding.Sharing">decSharePlusCBOR</a></code>, except allows to transform the shared state
 with a lens.</p></div></div><div class="top"><p class="src"><a id="v:decNoShareCBOR" class="def">decNoShareCBOR</a> &#8759; <a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:DecShareCBOR" title="Cardano.Ledger.Binary.Decoding.Sharing">DecShareCBOR</a> a &#8658; <a href="Cardano-Ledger-Binary-Decoding-Decoder.html#t:Decoder" title="Cardano.Ledger.Binary.Decoding.Decoder">Decoder</a> s a <a href="src/Cardano.Ledger.Binary.Decoding.Sharing.html#decNoShareCBOR" class="link">Source</a> <a href="#v:decNoShareCBOR" class="selflink">#</a></p><div class="doc"><p>Use <code><a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:DecShareCBOR" title="Cardano.Ledger.Binary.Decoding.Sharing">DecShareCBOR</a></code> class while ignoring sharing</p></div></div><div class="top"><p class="src"><a id="v:interns" class="def">interns</a> &#8759; <a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Interns" title="Cardano.Ledger.Binary.Decoding.Sharing">Interns</a> k &#8594; k &#8594; k <a href="src/Cardano.Ledger.Binary.Decoding.Sharing.html#interns" class="link">Source</a> <a href="#v:interns" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:internsFromMap" class="def">internsFromMap</a> &#8759; <a href="../base/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> k &#8658; Map k a &#8594; <a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Interns" title="Cardano.Ledger.Binary.Decoding.Sharing">Interns</a> k <a href="src/Cardano.Ledger.Binary.Decoding.Sharing.html#internsFromMap" class="link">Source</a> <a href="#v:internsFromMap" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:internsFromVMap" class="def">internsFromVMap</a> &#8759; <a href="../base/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> k &#8658; <a href="../vector-map/Data-VMap.html#t:VMap" title="Data.VMap">VMap</a> <a href="../vector-map/Data-VMap.html#t:VB" title="Data.VMap">VB</a> kv k a &#8594; <a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Interns" title="Cardano.Ledger.Binary.Decoding.Sharing">Interns</a> k <a href="src/Cardano.Ledger.Binary.Decoding.Sharing.html#internsFromVMap" class="link">Source</a> <a href="#v:internsFromVMap" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:toMemptyLens" class="def">toMemptyLens</a> &#8759; <a href="../base/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> a &#8658; Lens' a b &#8594; Lens' c b &#8594; Lens' c a <a href="src/Cardano.Ledger.Binary.Decoding.Sharing.html#toMemptyLens" class="link">Source</a> <a href="#v:toMemptyLens" class="selflink">#</a></p><div class="doc"><p>Using this function it is possible to compose two lenses. One will extract
 a value and another will used it for placing it into a empty monoid. Here is
 an example of how a second element of a tuple can be projected on the third
 element of a 3-tuple.</p><pre>toMemptyLens _3 _2 == lens (\(_, b) -&gt; (mempty, mempty, b)) (\(a, _) (_, _, b) -&gt; (a, b))</pre><p>Here is an example where we extract a second element of a tuple and insert it at
 third position of a three tuple while all other elements are set to <code><a href="../base/Data-Monoid.html#v:mempty" title="Data.Monoid">mempty</a></code>:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import Lens.Micro
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>(&quot;foo&quot;,&quot;bar&quot;) ^. toMemptyLens _3 _2 :: (Maybe String, (), String)
</code></strong>(Nothing,(),&quot;bar&quot;)
</pre><p>In the opposite direction of extracting the third element of a 3-tuple and
 replacing the second element of the tuple the setter is being applied to</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>(&quot;foo&quot;,&quot;bar&quot;) &amp; toMemptyLens _3 _2 .~ (Just &quot;baz&quot;, (), &quot;booyah&quot;) :: (String, String)
</code></strong>(&quot;foo&quot;,&quot;booyah&quot;)
</pre></div></div><div class="top"><p class="src"><a id="v:decShareMonadCBOR" class="def">decShareMonadCBOR</a> &#8759; (<a href="Cardano-Ledger-Binary-Decoding-DecCBOR.html#t:DecCBOR" title="Cardano.Ledger.Binary.Decoding.DecCBOR">DecCBOR</a> (f b), <a href="../base/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> f) &#8658; <a href="Cardano-Ledger-Binary-Decoding-Sharing.html#t:Interns" title="Cardano.Ledger.Binary.Decoding.Sharing">Interns</a> b &#8594; <a href="Cardano-Ledger-Binary-Decoding-Decoder.html#t:Decoder" title="Cardano.Ledger.Binary.Decoding.Decoder">Decoder</a> s (f b) <a href="src/Cardano.Ledger.Binary.Decoding.Sharing.html#decShareMonadCBOR" class="link">Source</a> <a href="#v:decShareMonadCBOR" class="selflink">#</a></p><div class="doc"><p>Share every item in a functor, have deserializing it</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.26.0</p></div></body></html>